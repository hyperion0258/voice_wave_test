<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>실시간 음성 파형</title>
    <style>
        canvas {
            width: 100%;
            height: 200px;
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <canvas id="waveform"></canvas>
    <script>
        const canvas = document.getElementById('waveform');
        const canvasCtx = canvas.getContext('2d');

        function visualizeAudio(dataArray) {
            const bufferLength = dataArray.length;
            canvasCtx.clearRect(0, 0, canvas.width, canvas.height);

            canvasCtx.lineWidth = 2;
            canvasCtx.strokeStyle = 'black';

            canvasCtx.beginPath();

            const sliceWidth = canvas.width * 1.0 / bufferLength;
            let x = 0;

            for (let i = 0; i < bufferLength; i++) {
                const v = dataArray[i] * 200.0; // 데이터 정규화 및 캔버스 높이에 맞추기
                const y = canvas.height / 2 + v;

                if (i === 0) {
                    canvasCtx.moveTo(x, y);
                } else {
                    canvasCtx.lineTo(x, y);
                }

                x += sliceWidth;
            }

            canvasCtx.lineTo(canvas.width, canvas.height / 2);
            canvasCtx.stroke();
        }

        window.visualizeAudio = visualizeAudio; // 안드로이드에서 호출할 수 있도록 전역 함수로 등록
    </script>
</body>
</html>
